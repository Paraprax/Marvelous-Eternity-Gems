<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Bootstrap fonts/icons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <!-- Bootstrap File -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <!-- Custom CSS File -->
    <link rel="stylesheet" href="./assets/css/style.css">

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>

    <title>Eternity Gems</title>
</head>

<body>

    <div class="container">
            <div class="row">
                <div class="col-md-4"><h1>Eternity Gems!</h1></div> <!-- row of game title -->
            </div>
            
            <div class="row" id="instruction-box"> <!-- row of instruction box -->
                <div class="col-md-6">

                <h3><p>Click on the Eternity Gems to generate power-points!</p>

                <p>The number of points they generate changes every round, and is a mystery until each is clicked!</p>
                
                <p>Click each gem until your score and the Universal Number are perfectly balanced - as all things should be!</p> 
                
                <p>But be careful not to go too far....</p></h3>
                </div>
            </div>

            <div class="row">  <!-- row of target number && win/loss score -->
                <div class="col-md-3" id="target-box">
                    <h1 id="target-score">39</h1>
                </div>

                <div class="col-m6-2" id="score-box">
                    <h4 id='wins'>Wins: 0</h4>
                    <h4 id='losses'>Losses: 0</h4>
                </div>
            </div>

            <div class="row">  <!-- row of gems -->
                    <div class="col-md-2">
                        <img src="./assets/images/R Gem.png" class="gem" id="realityGem">
                    </div>
                    <div class="col-md-2">
                        <img src="./assets/images/S Gem.png" class="gem" id="spaceGem">
                    </div>
                    <div class="col-md-2">
                        <img src="./assets/images/M Gem.png" class="gem" id="mindGem">
                    </div>
                    <div class="col-md-2">
                        <img src="./assets/images/T Gem.png" class="gem" id="timeGem">
                    </div>
            </div>

            <div class="row"> <!-- row of pointbox title-->
                <div class="col-md-3">
                    <h5>"Your Total Points Are:"</h5>
                </div>
            </div>

            <div class="row"> <!-- row of pointbox-->
                <div class="col-md-3">
                    <h1 id="player-points">0</h1>
                </div>
            </div>
    </div>
    
    <script>
    
        $(document).ready(function() {

            // ~ ~ ~ ~ ~ ~ variables ~ ~ ~ ~ ~ ~
            var target = 0; 

            var redGem = "";
            var blueGem = "";
            var yellowGem = "";
            var greenGem = "";
            
            var crystalPointArray = [];

            var wins = 0;
            var losses = 0;
            var playerPoints = 0;
            // ~ ~ ~ ~ ~ ~ end of variables ~ ~ ~ ~ ~ ~ 


            // setup functions
            function setTarget() {
                target = Math.floor( Math.random() * 101 ) + 19; // creates a random # between 19 and 120(inclusive)
                $("#target-score").html(target);
                console.log(target);
            };

            function setGemPoints() {
                for (var i = 0; i < 4; i++) {
                    points = Math.floor( Math.random() * 12 ) + 1; // creates a random #s between 1 and 12(inclusive)
                    crystalPointArray.push(points);
                    console.log(crystalPointArray);
                }

                redGem = crystalPointArray[0];   //sets the point-value of all four gems by pulling the four
                blueGem = crystalPointArray[1];  //random numbers in the crystalPointArray
                yellowGem = crystalPointArray[2];
                greenGem = crystalPointArray[3];

            }

            function updatePoints() { //update's the html displaying the user's points
                
                $("#player-points").html(playerPoints);
                console.log(points);
            };

            function updateWinLose() {
                $("#wins").html("Wins: " + wins);
                $("#losses").html("Losses: " + losses);
            }

            function checkStatus() {
                if (playerPoints > target)
                {   
                    updatePoints();
                    alert("SNAP!");
                    losses++;
                    updateWinLose();
                    reset();
                }
                else if (playerPoints === target)
                {
                    updatePoints();
                    alert("Perfectly balanced - as all things should be!");
                    wins++;
                    updateWinLose();
                    reset();
                }
                else 
                {
                    updatePoints();
                }
            }

            function reset() {
                setTarget(); // reset the target number (currently runs on page refresh only)
                setGemPoints(); //generate the crystalPointArray and assign the points from it to the gem variables
                playerPoints = 0;
                updatePoints();
            };


            reset(); // reset function called at page refresh


            //click events
            $("#realityGem").on("click", function() {
                playerPoints = playerPoints + redGem;
                checkStatus();
            });

            $("#spaceGem").on("click", function() {
                playerPoints = playerPoints + blueGem;
                checkStatus();
            });

            $("#mindGem").on("click", function() {
                playerPoints = playerPoints + yellowGem;
                checkStatus();
            });

            $("#timeGem").on("click", function() {
                playerPoints = playerPoints + greenGem;
                checkStatus();
            });


        });
    
    </script>

</body>
</html>